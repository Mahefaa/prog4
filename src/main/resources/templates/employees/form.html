<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Add new Employee</title>
    <style>
        /* Styling for the Update Button */
        .add-button {
            display: inline-block;
            background-color: #007BFF;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .add-button:hover {
            background-color: #0056b3;
        }
    </style>
    <style>
        /* Basic Styling for the Page */
        body {
            font-family: Arial, sans-serif;
            color: #333;
        }

        header {
            background-color: #007BFF;
            color: #fff;
            padding: 10px;
            text-align: center;
        }

        main {
            margin: 20px auto;
            max-width: 600px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        table {
            width: 100%;
            margin-bottom: 20px;
            border-collapse: collapse;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
    <style>
        #phoneNumber-fields .phoneNumberContainer {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
        }

        #phoneNumber-fields .phoneNumberContainer input, label {
            width: 100%;
        }
    </style>
</head>
<body>
<header>Add new employee</header>
<main>
    <form action="#" th:action="@{/employees}" th:object="${crupdateEmployee}" method="post"
          enctype="multipart/form-data">
        <table>
            <tr>
                <td><label>First Name</label></td>
                <td><input type="text" th:field="*{firstName}"/></td>
            </tr>
            <tr>
                <td><label>Last Name</label></td>
                <td><input type="text" th:field="*{lastName}"/></td>
            </tr>
            <tr>
                <td><label>Birth Date</label></td>
                <td><input type="date" th:field="*{birthDate}" th:max="${#temporals.createToday()}"/></td>
            </tr>
            <tr>
                <td><label>Profile Picture</label></td>
                <td>
                    <input type="file" th:field="*{profilePicture}">
                </td>
            </tr>
            <tr>
                <td><label>Sex</label></td>
                <td>
                    <select th:field="*{sex}">
                        <option value="M">Male</option>
                        <option value="F">Female</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><label>CSP</label></td>
                <td>
                    <select th:field="*{csp}">
                        <option value="M1">M1</option>
                        <option value="M2">M2</option>
                        <option value="OS1">OS1</option>
                        <option value="OS2">OS2</option>
                        <option value="OS3">OS3</option>
                        <option value="OP1">OP1</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><label>Address</label></td>
                <td><input type="text" th:field="*{address}"/></td>
            </tr>
            <tr>
                <td><label>Professional Email</label></td>
                <td><input type="email" th:field="*{emailPro}" required/></td>
            </tr>
            <tr>
                <td><label>Personal Email</label></td>
                <td><input type="email" th:field="*{emailPerso}" required/></td>
            </tr>
            <tr>
                <td><label>Role</label></td>
                <td><input type="text" th:field="*{role}" required/></td>
            </tr>
            <tr>
                <td><label>Child Number</label></td>
                <td><input type="number" th:field="*{childNumber}" required/></td>
            </tr>
            <tr>
                <td><label>Hiring Date</label></td>
                <td><input type="date" th:field="*{hiringDate}" required/></td>
            </tr>
            <tr>
                <td><label>Departure Date</label></td>
                <td><input type="date" th:field="*{departureDate}"/></td>
            </tr>
            <tr>
                <td><label>CNAPS</label></td>
                <td><input type="text" th:field="*{cnaps}" required/></td>
            </tr>
            <tr>
                <td><label>Phone Numbers</label></td>
                <td id="phoneNumber-fields">
                    <div class="phoneNumberContainer">
                        <input th:field="*{phones[0].phone.id}" hidden/>
                        <label for="phoneCode" th:text="CODE"></label><input type="text" id="phoneCode"
                                                                             th:field="*{phones[0].phone.code}"
                                                                             required/>
                        <label for="phoneNumber" th:text="Number"></label><input type="text" id="phoneNumber"
                                                                                 th:field="*{phones[0].phone.phoneNumber}"
                                                                                 required/>
                    </div>
                </td>
                <td>
                    <button type="button" class="add-button" onclick="addPhoneNumber()">Add Phone Number</button>
                </td>
            </tr>
            <tr>
                <td><label>NIC ID</label></td>
                <td><input type="text" th:field="*{nic.id}" required/></td>
            </tr>
            <tr>
                <td><label>NIC Issuing Date</label></td>
                <td><input type="date" th:field="*{nic.issuingDate}" required/></td>
            </tr>
            <tr>
                <td><label>NIC Issuing Place</label></td>
                <td><input type="text" th:field="*{nic.issuingPlace}" required/></td>
            </tr>
        </table>
        <button type="submit">Enregistrer</button>
    </form>
</main>
<script th:inline="javascript" defer>
    let phoneCount = 1;

    function addPhoneNumber() {
        const phoneInput = document.createElement("input");
        const phoneInputLabel = document.createElement("label");
        const phoneNumberId = "phoneNumber" + phoneCount;

        phoneInputLabel.setAttribute("for", phoneNumberId)
        phoneInput.setAttribute("type", "text");
        phoneInput.setAttribute("id", phoneNumberId);
        phoneInput.setAttribute("name", "phones[" + phoneCount + "].phone.phoneNumber");
        phoneInput.setAttribute("required", "");

        phoneInputLabel.htmlFor = phoneNumberId;
        phoneInputLabel.innerText = phoneNumberId;

        const phoneCodeInput = document.createElement("input");
        const phoneCodeLabel = document.createElement("label");
        const phoneCodeId = "phoneCode" + phoneCount;

        phoneCodeInput.setAttribute("type", "text");
        phoneCodeInput.setAttribute("id", phoneCodeId);
        phoneCodeInput.setAttribute("name", "phones[" + phoneCount + "].phone.code");
        phoneCodeInput.setAttribute("required", "");

        phoneCodeLabel.htmlFor = phoneCodeId;
        phoneCodeLabel.innerText = phoneCodeId;

        const phoneField = document.getElementById("phoneNumber-fields");
        const phoneNumberContainer = document.createElement("div");

        phoneNumberContainer.className = "phoneNumberContainer";
        phoneNumberContainer.appendChild(phoneCodeLabel);
        phoneNumberContainer.appendChild(phoneCodeInput);
        phoneNumberContainer.appendChild(phoneInputLabel)
        phoneNumberContainer.appendChild(phoneInput);
        phoneField.appendChild(phoneNumberContainer);

        phoneCount++;
    }
</script>
</body>
</html>